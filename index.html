<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0b0d12">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Raiki">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <title>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
  </head>
  <body>
    <header class="site-header">
      <div class="hero">
        <div class="hero-inner">
          <img class="hero-avatar" src="images/Raiki.jpg" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ">
        </div>
      </div>
    </header>
    <section class="identity-block" aria-label="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ¦‚è¦">
      <h1 class="identity-name">å±±å…ƒ æ¥è¼<span class="latin">Raiki Yamamoto</span></h1>
      <p class="identity-title">Lotus Card å…±åŒCEO</p>
      <p class="identity-subtitle">Leverages U.S. DX Technician</p>
    </section>
    <main class="card" role="main">
      <section class="intro" aria-label="è‡ªå·±ç´¹ä»‹">
        <h2 class="intro-title">About me</h2>
        <p>20æ­³èµ·æ¥­å®¶</p>
        <p>ã‚¢ãƒ¡ãƒªã‚«å¤§å­¦2å¹´é–“ç•™å­¦â†’èµ·æ¥­ã™ã‚‹ãŸã‚ä¸­é€€</p>
        <p>è¶£å‘³: ã‚µãƒƒã‚«ãƒ¼ã€ãƒ”ã‚¢ãƒã€æ—…è¡Œ</p>
        <p><strong>ãƒ“ã‚¸ãƒ§ãƒ³:</strong> ã¾ã è¦‹ã¬ä¸–ç•Œã¸</p>
      </section>

      <section class="sns" aria-label="SNS ãƒªãƒ³ã‚¯">
        <div class="sns-grid">
          <a class="sns-btn" href="https://www.instagram.com/raiki_aer/" target="_blank" rel="noopener" aria-label="Instagram">
            <img src="images/Instagram.png" alt="Instagram">
            <span class="label">Instagram</span>
          </a>
          <a class="sns-btn" href="https://www.linkedin.com/in/raiki-yamamoto-047106277/" target="_blank" rel="noopener" aria-label="LinkedIn">
            <img src="images/LinkedInç”»åƒ.png" alt="LinkedIn">
            <span class="label">LinkedIn</span>
          </a>
          <a class="sns-btn" href="https://note.com/raiki4416" target="_blank" rel="noopener" aria-label="note">
            <img src="images/Noteç”»åƒ.webp" alt="note">
            <span class="label">note</span>
          </a>
          <a class="sns-btn" href="mailto:soccer.6.yama6@gmail.com" aria-label="Email">
            <img src="images/Mailç”»åƒ.png" alt="Email">
            <span class="label">Email</span>
          </a>
        </div>
      </section>

      <section class="share-section" aria-label="å…±æœ‰ãƒ»ä¿å­˜">
        <button class="share-save-btn" id="shareBtn">
          <span>å…±æœ‰/ãƒ›ãƒ¼ãƒ ç”»é¢ã«ä¿å­˜</span>
        </button>
      </section>

      <section class="schedule" aria-label="æ—¥ç¨‹èª¿æ•´">
        <p>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ãŠè©±ã—ã—ã¾ã›ã‚“ã‹ï¼Ÿ<a href="https://calendly.com/soccer-6-yama6/30min" target="_blank" rel="noopener">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´</a>ã€‚</p>
      </section>
    </main>

    <footer class="footer">
      <small>Â© <span id="year"></span> Raiki Yamamoto</small>
    </footer>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear()

      // PWA Service Worker Registration
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('SW registered: ', registration);
            })
            .catch((registrationError) => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }

      // Web Share API and Add to Home Screen
      const shareBtn = document.getElementById('shareBtn');
      let deferredPrompt;
      
      // Listen for the beforeinstallprompt event
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
      });

      async function shareOrInstall() {
        // Check if PWA is already installed
        if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
          // Already installed, just share
          await shareProfile();
          return;
        }

        // Detect iOS Safari
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);

        if (isIOS && isSafari) {
          // Show instructions for iOS Safari
          showIOSInstallInstructions();
        } else if (deferredPrompt) {
          // Android Chrome - show install prompt
          const { outcome } = await deferredPrompt.prompt();
          deferredPrompt = null;
          
          if (outcome === 'accepted') {
            console.log('User accepted the install prompt');
          } else {
            console.log('User dismissed the install prompt');
          }
        } else {
          // Fallback: try sharing
          await shareProfile();
        }
      }

      function showIOSInstallInstructions() {
        const instructions = `
ğŸ“± ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã™ã‚‹æ–¹æ³•ï¼š

1ï¸âƒ£ Safariã®ä¸‹éƒ¨ã«ã‚ã‚‹ã€Œå…±æœ‰ã€ãƒœã‚¿ãƒ³ï¼ˆâ–¡â†‘ï¼‰ã‚’ã‚¿ãƒƒãƒ—
2ï¸âƒ£ ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’é¸æŠ
3ï¸âƒ£ ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—

ã“ã‚Œã§ã€ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ä½¿ç”¨ã§ãã¾ã™ï¼
        `;
        
        if (confirm(instructions + '\n\nä»Šã™ãå…±æœ‰ã—ã¾ã™ã‹ï¼Ÿ')) {
          shareProfile();
        }
      }
      
      async function shareProfile() {
        const shareData = {
          title: 'å±±å…ƒ æ¥è¼ - Lotus Card å…±åŒCEO',
          text: 'Lotus Card å…±åŒCEOã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ã”è¦§ãã ã•ã„',
          url: window.location.href
        };

        try {
          if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {
            await navigator.share(shareData);
          } else {
            // Fallback: Copy to clipboard
            await navigator.clipboard.writeText(window.location.href);
            alert('URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
          }
        } catch (err) {
          console.error('Error sharing: ', err);
          // Final fallback: Copy to clipboard
          try {
            await navigator.clipboard.writeText(window.location.href);
            alert('URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
          } catch (clipboardErr) {
            alert('å…±æœ‰ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚URL: ' + window.location.href);
          }
        }
      }

      shareBtn.addEventListener('click', shareOrInstall);

      // Update button text based on device and installation status
      function updateButtonText() {
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isInstalled = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
        
        if (isInstalled) {
          shareBtn.querySelector('span').textContent = 'å…±æœ‰';
        } else if (isIOS) {
          shareBtn.querySelector('span').textContent = 'å…±æœ‰/ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ';
        } else {
          shareBtn.querySelector('span').textContent = 'å…±æœ‰/ãƒ›ãƒ¼ãƒ ç”»é¢ã«ä¿å­˜';
        }
      }

      // Update button text on page load
      updateButtonText();
    </script>
  </body>
  </html>


